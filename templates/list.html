<!DOCTYPE html>
<html>
<head>
    <title>–ú–æ–∏ —Ä–∞—Å—Ö–æ–¥—ã</title>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
    <style>
        table { border-collapse: collapse; width: 100%; margin-top: 20px; }
        th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }
        th { background-color: #f2f2f2; }
        .actions form { display: inline; margin-right: 5px; }
    </style>
</head>
<body>
    <h2>–ú–æ–∏ —Ä–∞—Å—Ö–æ–¥—ã</h2>
    
    <p>
        <h3>–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ, <span>{{ current_user.username }}!</span></h3>
        <a href="/add_page">–î–æ–±–∞–≤–∏—Ç—å —Ä–∞—Å—Ö–æ–¥</a> | 
        <a href="/logout">–í—ã–π—Ç–∏</a>
    </p>
    
    {% if expenses %}
        <table>
            <tr>
                <th>–î–∞—Ç–∞</th>
                <th>–ö–∞—Ç–µ–≥–æ—Ä–∏—è</th>
                <th>–û–ø–∏—Å–∞–Ω–∏–µ</th>
                <th>–°—É–º–º–∞</th>
                <th>–î–µ–π—Å—Ç–≤–∏—è</th>
            </tr>
            
            {% for expense in expenses %}
            <tr>
                <td>
                    {% if expense.created_at %}
                        {{ expense.created_at.strftime('%Y-%m-%d') }}
                    {% else %}
                        -
                    {% endif %}
                </td>
                <td>{{ expense.category }}</td>
                <td>{{ expense.description if expense.description else '-' }}</td>
                <td>{{ "%.2f"|format(expense.amount) }} ‚ÇΩ</td>
                <td class="actions">
                    <a href="/edit_page/{{ expense.id }}">‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</a>
                    <form action="/delete_html/{{ expense.id }}" method="POST" style="display: inline;">
                        <button type="submit" onclick="return confirm('–£–¥–∞–ª–∏—Ç—å —ç—Ç—É –∑–∞–ø–∏—Å—å?')">üóëÔ∏è –£–¥–∞–ª–∏—Ç—å</button>
                    </form>
                </td>
            </tr>
            {% endfor %}
        </table>
        
        <p>
            <strong>–í—Å–µ–≥–æ –∑–∞–ø–∏—Å–µ–π:</strong> {{ expenses|length }}<br>
            <strong>–û–±—â–∞—è —Å—É–º–º–∞:</strong> 
            {% set total = expenses|sum(attribute='amount') %}
            {{ "%.2f"|format(total) }} ‚ÇΩ
        </p>
    {% else %}
        <p><b>–£ –≤–∞—Å –ø–æ–∫–∞ –Ω–µ—Ç —Ä–∞—Å—Ö–æ–¥–æ–≤</b></p>
    {% endif %}
</body>
</html>
